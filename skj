#!/usr/bin/env python3
# SPDX-FileCopyrightText: 2025 hakozaki teruki
# SPDX-License-Identifier: BSD-3-Clause

import sys
import datetime
import yaml

CONFIG = "schedule.yml"

def load_schedule():
    with open(CONFIG, "r", encoding="utf-8") as f:
        return yaml.safe_load(f)

def today():
    return datetime.datetime.today().strftime("%A").lower()

def main():
    schedule = load_schedule()

    if sys.stdin.isatty():
        key = today()
    else:
        key = sys.stdin.read().strip()

    if key == "week":
        for d, items in schedule.items():
            print(d)
            for s in items:
                print("  " + s)
        sys.exit(0)

    if key not in schedule:
        print("Invalid input", file=sys.stderr)
        sys.exit(1)

    for s in schedule[key]:
        print(s)

if __name__ == "__main__":
    main()
